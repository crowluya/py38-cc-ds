name: node
description: A modern Node.js application with TypeScript
language: TypeScript
version: 1.0.0
variables:
  - name: author_name
    description: Author name
    default: "Your Name"
    required: false

  - name: node_version
    description: Node.js version
    default: "20"
    required: false

files:
  - path: package.json
    content: |
      {
        "name": "{{project_name_kebab}}",
        "version": "1.0.0",
        "description": "A modern Node.js application",
        "main": "dist/index.js",
        "scripts": {
          "dev": "tsx watch src/index.ts",
          "build": "tsc",
          "start": "node dist/index.js",
          "test": "jest",
          "lint": "eslint src --ext .ts",
          "format": "prettier --write \"src/**/*.ts\""
        },
        "keywords": [],
        "author": "{{author_name}}",
        "license": "MIT",
        "dependencies": {
          "express": "^4.18.2",
          "dotenv": "^16.3.1"
        },
        "devDependencies": {
          "@types/express": "^4.17.21",
          "@types/node": "^20.10.6",
          "@typescript-eslint/eslint-plugin": "^6.17.0",
          "@typescript-eslint/parser": "^6.17.0",
          "eslint": "^8.56.0",
          "jest": "^29.7.0",
          "prettier": "^3.1.1",
          "tsx": "^4.7.0",
          "typescript": "^5.3.3"
        },
        "engines": {
          "node": ">={{node_version}}"
        }
      }
    template: true

  - path: README.md
    content: |
      # {{project_name}}

      A modern Node.js application with TypeScript created with project-init.

      ## Getting Started

      ```bash
      # Install dependencies
      npm install

      # Development mode
      npm run dev

      # Build
      npm run build

      # Production
      npm start
      ```

      ## Features

      - ðŸš€ Express.js framework
      - ðŸ“¦ TypeScript
      - ðŸ”§ ESLint & Prettier
      - âœ… Jest testing

      ## License

      MIT
    template: true

  - path: tsconfig.json
    content: |
      {
        "compilerOptions": {
          "target": "ES2022",
          "module": "commonjs",
          "lib": ["ES2022"],
          "outDir": "./dist",
          "rootDir": "./src",
          "strict": true,
          "esModuleInterop": true,
          "skipLibCheck": true,
          "forceConsistentCasingInFileNames": true,
          "resolveJsonModule": true,
          "moduleResolution": "node",
          "declaration": true,
          "declarationMap": true,
          "sourceMap": true
        },
        "include": ["src/**/*"],
        "exclude": ["node_modules", "dist", "**/*.test.ts"]
      }
    template: false

  - path: .eslintrc.json
    content: |
      {
        "parser": "@typescript-eslint/parser",
        "extends": [
          "eslint:recommended",
          "plugin:@typescript-eslint/recommended"
        ],
        "plugins": ["@typescript-eslint"],
        "env": {
          "node": true,
          "es6": true
        },
        "parserOptions": {
          "ecmaVersion": 2022,
          "sourceType": "module"
        }
      }
    template: false

  - path: .prettierrc
    content: |
      {
        "semi": true,
        "trailingComma": "es5",
        "singleQuote": true,
        "printWidth": 80,
        "tabWidth": 2
      }
    template: false

  - path: .gitignore
    content: |
      # Dependencies
      node_modules/

      # Build output
      dist/

      # Environment variables
      .env
      .env.local
      .env.*.local

      # Logs
      logs/
      *.log
      npm-debug.log*
      yarn-debug.log*
      yarn-error.log*
      lerna-debug.log*

      # OS
      .DS_Store
      Thumbs.db

      # IDE
      .idea/
      .vscode/
      *.swp
      *.swo
      *~

      # Test coverage
      coverage/

      # Temporary files
      .cache/
      .tmp/
      tmp/
    template: false

  - path: .env.example
    content: |
      PORT=3000
      NODE_ENV=development
    template: false

  - path: src/index.ts
    content: |
      import express, { Request, Response } from 'express';
      import dotenv from 'dotenv';

      dotenv.config();

      const app = express();
      const PORT = process.env.PORT || 3000;

      // Middleware
      app.use(express.json());
      app.use(express.urlencoded({ extended: true }));

      // Routes
      app.get('/', (req: Request, res: Response) => {
        res.json({
          message: 'Welcome to {{project_name}}',
          version: '1.0.0'
        });
      });

      app.get('/health', (req: Request, res: Response) => {
        res.json({ status: 'healthy', timestamp: new Date().toISOString() });
      });

      // Start server
      app.listen(PORT, () => {
        console.log(`ðŸš€ Server is running on http://localhost:${PORT}`);
        console.log(`ðŸ“ Environment: ${process.env.NODE_ENV || 'development'}`);
      });

      export default app;
    template: true

  - path: src/__tests__/index.test.ts
    content: |
      import request from 'supertest';
      import app from '../index';

      describe('GET /', () => {
        it('should return welcome message', async () => {
          const response = await request(app).get('/');
          expect(response.status).toBe(200);
          expect(response.body).toHaveProperty('message');
          expect(response.body).toHaveProperty('version');
        });
      });

      describe('GET /health', () => {
        it('should return health status', async () => {
          const response = await request(app).get('/health');
          expect(response.status).toBe(200);
          expect(response.body).toHaveProperty('status', 'healthy');
          expect(response.body).toHaveProperty('timestamp');
        });
      });
    template: false

directories:
  - src/__tests__
